# Проект "Удобный дом"

![image-20210926203303291](/Users/nemo/Library/Application Support/typora-user-images/image-20210926203303291.png)

Проект представляет из себя панель управления застройщика над своими объектами. Застройщик может создавать сущность объекта, редактировать ее и добавлять к ней информацию о доступных сервисах в объекте, добавлять информацию об оборудовании и документации объекта.



## Стэк проекта

В проекте используется front-end стэк [React](https://reactjs.org/) с [Typescript](https://www.typescriptlang.org/), UI библиотека [Antd](https://ant.design/), для роутинга по SPA используется [React router](https://reactrouter.com/web/guides/quick-start). Используется менеджер асинхронных запросов [React Query](https://react-query.tanstack.com/), в качестве стейт менеджера планируется использовать [zustand](https://github.com/pmndrs/zustand). Для стилизации компонентов используется [styled-components](https://www.styled-components.com/).



## Архитектура

Архитектура проекта состоит из сервисов с изолированной ответственностю. Есть сервисы с бизнес логикой, которые могут отвечать за авторизацию, страницы объекта или личный кабинет администратора и есть "платформенные" сервисы, где хранятся компоненты или логика, которая применяется везде в проекте и в нескольких бизнес сервисах. Таких сервиса, на данный момент, 2: `ui` и `services`.

### Структура платформенных сервисов

Платформенные сервисы используются во всех местах в проекте, поэтому очень важно проверять работоспособность всего проекта при редактировании файлов в директориях, относящиеся к платформенным сервисам. Все, что пишется в этих директориях, должно быть гибким и реюзабельным.

Все в директориях платформенных сервисов бандлится в файле `index.ts` вплоть до корневого файла. Это оптимизирует скорость сборки вебпака и дает нам в бизнес сервисах все импортировать из одного места:

![image-20210926205322538](/Users/nemo/Library/Application Support/typora-user-images/image-20210926205322538.png)

![image-20210926205508468](/Users/nemo/Library/Application Support/typora-user-images/image-20210926205508468.png)

![image-20210926205519426](/Users/nemo/Library/Application Support/typora-user-images/image-20210926205519426.png)

![image-20210926205546653](/Users/nemo/Library/Application Support/typora-user-images/image-20210926205546653.png)

![image-20210926205701349](/Users/nemo/Library/Application Support/typora-user-images/image-20210926205701349.png)

#### ui

В директории `ui` хранятся базовые компоненты как кнопки, лейауты и иконки. При создании или редактировании компонентов в платформе не допускается никакая зашитая во внутрь бизнес логика, стейт менеджмент, не относящийся к компоненту, захардкоженая текстовка, которую нельзя поменять через пропсы. Так же не желательно в `ui` не желательно отправлять компоненты, которые, вероятней всего, будут использоваться только в одном месте. Для этого есть директория `components` в бизнес сервисах.

### Структура бизнес сервисов

Бизнес серсвисы хранят в себе компоненты, страницы, константы, утилиты и типы, относящиеся конкретно относящиеся к определенному разделу бизнес логики. Бандлим файлы так же как и платформенными, но в бизнес сервисах нет бандлера в корне. Пристуствует файл `index.tsx`, который возвращает контейнер страницы и является единственной экспортируемой сущностью с корня директории.

Пример структуры бизнес сервиса:

![image-20210926211243563](/Users/nemo/Library/Application Support/typora-user-images/image-20210926211243563.png)



## Правила при написании кода

При написании кода есть перечень рекомендаций, который поможет писать стабильный, простой в понимании и рабочий код:

* ##### **Воздержаться от использования слабой типизации или отсутсвия типизации вовсе**

  Проект написан на typescript, поэтому необходимо типизировать данные через интерфейсы, энамы и тайп алиасы, не использовать тайм каст any или использовать в очень крайнем случае;

* **Не использовать в условиях сравнения, которые не гарантируют точно срабатывание условия **

  Пример: `if (item.label === 'редактировать') {}`, сравнение с текстовкой не дает абсолютно никаких гарантий, что условие сработает когда-то или не сработает ложно. Так же, если текстовка поменяется, то данное условие перестанет работать;

* **Воздержаться от лишнего использования вачеров как `useEffect` для отслежки состояния**

  Вачеры - не стабильный способ проверки состояния, т.к трудно уследить моменты, когда они срабатывают, от чего может код внутри срабатывать чаще, чем нужно или не срабатывать вовсе. В большинстве случаев можно завязаться на ивенты компонента как `onChange` или `onClick`, где мы можем легко отследить место срабатывания;

* **Не использовать мутируемые переменные**

  Один из принципов функционального программирования – отсутсвие перезаписывания возможности перезаписывать переменные. При назначении переменных стоит обозначать их как `const` и обрабатывать их с помощью функций, если это массив, то с помощью методов как `map`, `filter`, `reduce`;

* **Не обозначать константы для текстовок**

  Для локализации текстовок будет использоваться i18. На данный момент рекоммендуется воздержаться от обозначения текстовок переменными, т.к. это может запутать;

* **Компоненты не должны зависеть от других компонентов или выполнять роботу, которой должен заниматься дочерний компонент **

  Принцыпы [SOLID](https://medium.com/backticks-tildes/the-s-o-l-i-d-principles-in-pictures-b34ce2f1e898) больше относятся к ООП, но `принцип единственной ответственности` очень важен при создании компонентов в react. Для избежания трудностей во время разработки, компоненты не должны выполнять работу дочерних компонентов или родительских;



